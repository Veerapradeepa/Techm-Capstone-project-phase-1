<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Payment - Mobi-Comm</title>
  
  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <!-- Bootstrap Icons -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
    rel="stylesheet"
  />
  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&family=Great+Vibes&display=swap"
    rel="stylesheet"
  />

  <style>
    :root {
      --primary: #880e4f;
      --secondary: #ffc107;
      --bg-light: #fffaf6;
      --text-dark: #333333;
      --text-light: #ffffff;
      --success: #28a745;
    }

    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f8f8f8;
    }

    .back-button {
      display: inline-flex;
      align-items: center;
      margin: 20px 0 0 20px;
      color: var(--primary);
      font-weight: 500;
      text-decoration: none;
      transition: all 0.3s;
    }

    .back-button:hover {
      color: #6a1951;
      transform: translateX(-5px);
    }

    .back-button i {
      margin-right: 5px;
    }

    .payment-container {
      max-width: 1100px;
      margin: 30px auto;
      padding: 0 15px;
    }

    .payment-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .payment-title {
      color: var(--primary);
      font-size: 2rem;
      font-weight: bold;
      margin-bottom: 5px;
    }

    .payment-subtitle {
      color: #666;
      font-size: 1rem;
    }

    .card {
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      border: none;
      overflow: hidden;
      margin-bottom: 30px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }

    .card-header {
      background-color: var(--primary);
      color: white;
      font-weight: bold;
      padding: 15px 20px;
      border-bottom: none;
    }

    .order-summary-card .card-body {
      padding: 20px;
    }

    .summary-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
      color: var(--text-dark);
    }

    .summary-item-title {
      font-weight: 600;
      color: #555;
    }

    .summary-total {
      border-top: 1px solid #eee;
      padding-top: 12px;
      margin-top: 12px;
      font-weight: bold;
      font-size: 1.2rem;
    }

    .payment-methods-card .card-body {
      padding: 0;
    }

    .nav-tabs {
      border-bottom: none;
      background-color: #f1f1f1;
    }

    .nav-tabs .nav-link {
      border: none;
      border-radius: 0;
      padding: 15px 20px;
      color: #666;
      font-weight: 500;
      transition: all 0.3s ease;
      position: relative;
    }

    .nav-tabs .nav-link.active {
      color: var(--primary);
      background-color: white;
      border-bottom: 3px solid var(--primary);
    }

    .nav-tabs .nav-link .payment-icon {
      margin-right: 8px;
    }

    .tab-content {
      padding: 25px;
    }

    .form-control {
      border-radius: 8px;
      padding: 12px 15px;
      font-size: 14px;
      border: 1px solid #ddd;
      transition: border-color 0.3s;
    }

    .form-control:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 0.2rem rgba(136, 14, 79, 0.25);
    }

    .form-label {
      font-weight: 500;
      margin-bottom: 7px;
      color: #555;
    }

    .upi-logos {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 20px 0;
    }

    .upi-logo {
      width: 50px;
      height: 50px;
      background-color: white;
      border-radius: 10px;
      padding: 5px;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s;
    }

    .upi-logo:hover {
      transform: scale(1.1);
    }

    .upi-logo img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .payment-btn {
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 12px 25px;
      font-weight: bold;
      letter-spacing: 0.5px;
      margin-top: 15px;
      transition: all 0.3s;
      width: 100%;
    }

    .payment-btn:hover {
      background-color: #6a1951;
      transform: translateY(-2px);
    }

    /* Success modal */
    .success-modal .modal-content {
      border-radius: 15px;
      border: none;
    }

    .success-modal .modal-header {
      border-bottom: none;
      padding-bottom: 0;
    }

    .success-modal .modal-body {
      padding: 20px 30px 30px;
      text-align: center;
    }

    .success-icon {
      font-size: 70px;
      color: var(--success);
      margin-bottom: 20px;
    }

    .success-message {
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 10px;
      color: var(--text-dark);
    }

    .success-details {
      color: #666;
      margin-bottom: 20px;
    }

    .success-btn {
      background-color: var(--success);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 10px 25px;
      font-weight: 500;
      margin-top: 10px;
    }

    .success-btn:hover {
      background-color: #218838;
    }

    /* Card icons and form */
    .card-icons {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }

    .card-icon {
      width: 45px;
      height: 30px;
      border-radius: 4px;
      border: 1px solid #ddd;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 5px;
    }

    .card-icon img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    .expiry-cvv-row {
      display: flex;
      gap: 15px;
    }

    .expiry-cvv-row .form-group {
      flex: 1;
    }

    /* Bank list */
    .bank-list {
      max-height: 300px;
      overflow-y: auto;
      margin-bottom: 20px;
    }

    .bank-item {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      border-bottom: 1px solid #eee;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .bank-item:hover {
      background-color: #f9f9f9;
    }

    .bank-item.selected {
      background-color: #f0f7ff;
    }

    .bank-logo {
      width: 40px;
      height: 40px;
      margin-right: 15px;
      border-radius: 8px;
      border: 1px solid #eee;
      padding: 5px;
    }

    .bank-name {
      font-weight: 500;
      color: #444;
    }

    /* Netbanking login form */
    .netbanking-login 
    {
      padding: 20px;
      border-radius: 10px;
      background-color: #f9f9f9;
      margin-top: 20px;
      display: none;
    }

    .netbanking-login.show {
      display: block;
    }

    .netbanking-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }

    .selected-bank-logo {
      width: 40px;
      height: 40px;
      margin-right: 10px;
    }

    .selected-bank-name {
      font-weight: bold;
      font-size: 18px;
      color: #333;
    }

    /* Verification modal */
    .verification-modal .modal-content {
      border-radius: 15px;
      border: none;
    }

    .verification-header {
      text-align: center;
      margin-bottom: 20px;
    }

    .verification-title {
      color: var(--primary);
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 5px;
    }

    /* Loading animation */
    .payment-processing {
      text-align: center;
      padding: 30px;
    }

    .spinner-border {
      width: 3rem;
      height: 3rem;
      color: var(--primary);
    }

    .progress {
      height: 10px;
      margin: 20px 0;
    }

    .progress-bar {
      background-color: var(--primary);
    }

    /* OTP Verification */
    .otp-container {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 15px 0;
    }

    .otp-input {
      width: 45px;
      height: 45px;
      font-size: 1.2rem;
      text-align: center;
      border: 1px solid #ddd;
      border-radius: 8px;
    }

    .otp-input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 0.2rem rgba(136, 14, 79, 0.25);
    }

    /* Responsive styles */
    @media (max-width: 991px) {
      .order-column {
        order: 1;
      }
      
      .payment-column {
        order: 2;
      }
    }

    @media (max-width: 768px) {
      .expiry-cvv-row {
        flex-direction: column;
        gap: 0;
      }
      
      .nav-tabs .nav-link {
        padding: 10px;
        font-size: 14px;
      }
      
      .payment-title {
        font-size: 1.5rem;
      }

      .otp-container {
        gap: 5px;
      }

      .otp-input {
        width: 40px;
        height: 40px;
      }
    }
  </style>
</head>
<body>
  <!-- Back Button -->
  <a href="plans.html" class="back-button">
    <i class="bi bi-arrow-left"></i> Back to Plans
  </a>

  <!-- Payment Container -->
  <div class="payment-container" id="payment-main-container" style="display: none;">
    <div class="payment-header">
      <h1 class="payment-title">Complete Your Payment</h1>
      <p class="payment-subtitle">Secure your plan with our easy payment options</p>
    </div>

    <div class="row">
      <!-- Payment Methods Card - Switched order in the layout -->
      <div class="col-lg-8 payment-column">
        <div class="card payment-methods-card">
          <div class="card-header">
            <i class="bi bi-credit-card-2-front me-2"></i> Payment Methods
          </div>
          <div class="card-body">
            <!-- Payment Method Tabs -->
            <ul class="nav nav-tabs" id="paymentTabs" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" id="card-tab" data-bs-toggle="tab" data-bs-target="#card-content" type="button" role="tab" aria-controls="card-content" aria-selected="true">
                  <i class="bi bi-credit-card-2-front payment-icon"></i> Card
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="netbanking-tab" data-bs-toggle="tab" data-bs-target="#netbanking-content" type="button" role="tab" aria-controls="netbanking-content" aria-selected="false">
                  <i class="bi bi-bank payment-icon"></i> Net Banking
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="upi-tab" data-bs-toggle="tab" data-bs-target="#upi-content" type="button" role="tab" aria-controls="upi-content" aria-selected="false">
                  <i class="bi bi-phone payment-icon"></i> UPI
                </button>
              </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content" id="paymentTabsContent">
              <!-- Credit/Debit Card Tab -->
              <div class="tab-pane fade show active" id="card-content" role="tabpanel" aria-labelledby="card-tab">
                <form id="card-form">
                  <div class="card-icons">
                    <div class="card-icon">
                      <img src="https://cdn-icons-png.flaticon.com/512/196/196578.png" alt="Visa">
                    </div>
                    <div class="card-icon">
                      <img src="https://cdn-icons-png.flaticon.com/512/196/196561.png" alt="MasterCard">
                    </div>
                    <div class="card-icon">
                      <img src="https://cdn-icons-png.flaticon.com/512/196/196565.png" alt="American Express">
                    </div>
                    <div class="card-icon">
                      <img src="https://cdn-icons-png.flaticon.com/512/196/196539.png" alt="Discover">
                    </div>
                  </div>

                  <div class="form-group mb-3">
                    <label for="card-holder" class="form-label">Card Holder Name</label>
                    <input type="text" class="form-control" id="card-holder" placeholder="Enter card holder name" required>
                  </div>

                  <div class="form-group mb-3">
                    <label for="card-number" class="form-label">Card Number</label>
                    <input type="text" class="form-control" id="card-number" placeholder="0000 0000 0000 0000" maxlength="19" required>
                  </div>

                  <div class="expiry-cvv-row">
                    <div class="form-group mb-3">
                      <label for="card-expiry" class="form-label">Expiry Date</label>
                      <input type="text" class="form-control" id="card-expiry" placeholder="MM/YY" maxlength="5" required>
                    </div>

                    <div class="form-group mb-3">
                      <label for="card-cvv" class="form-label">CVV</label>
                      <input type="password" class="form-control" id="card-cvv" placeholder="•••" maxlength="4" required>
                    </div>
                  </div>

                  <button type="submit" class="payment-btn">PAY NOW</button>
                </form>
              </div>

              <!-- Net Banking Tab -->
              <div class="tab-pane fade" id="netbanking-content" role="tabpanel" aria-labelledby="netbanking-tab">
                <div class="bank-list">
                  <div class="bank-item" data-bank="SBI" data-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/State_Bank_of_India_logo.svg/2048px-State_Bank_of_India_logo.svg.png" data-bank-type="personal">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/State_Bank_of_India_logo.svg/2048px-State_Bank_of_India_logo.svg.png" alt="SBI" class="bank-logo">
                    <span class="bank-name">State Bank of India</span>
                  </div>
                  <div class="bank-item" data-bank="HDFC" data-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/2/28/HDFC_Bank_Logo.svg/2560px-HDFC_Bank_Logo.svg.png" data-bank-type="retail">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/28/HDFC_Bank_Logo.svg/2560px-HDFC_Bank_Logo.svg.png" alt="HDFC" class="bank-logo">
                    <span class="bank-name">HDFC Bank</span>
                  </div>
                  <div class="bank-item" data-bank="ICICI" data-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/8/89/ICICI_Bank_Logo.svg/2560px-ICICI_Bank_Logo.svg.png" data-bank-type="iMobile">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/89/ICICI_Bank_Logo.svg/2560px-ICICI_Bank_Logo.svg.png" alt="ICICI" class="bank-logo">
                    <span class="bank-name">ICICI Bank</span>
                  </div>
                  <div class="bank-item" data-bank="AXIS" data-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Axis_Bank_logo.svg/2560px-Axis_Bank_logo.svg.png" data-bank-type="retail">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Axis_Bank_logo.svg/2560px-Axis_Bank_logo.svg.png" alt="Axis" class="bank-logo">
                    <span class="bank-name">Axis Bank</span>
                  </div>
                  <div class="bank-item" data-bank="PNB" data-logo="https://upload.wikimedia.org/wikipedia/en/thumb/5/59/Punjab_National_Bank_logo.svg/1200px-Punjab_National_Bank_logo.svg.png" data-bank-type="retail">
                    <img src="https://upload.wikimedia.org/wikipedia/en/thumb/5/59/Punjab_National_Bank_logo.svg/1200px-Punjab_National_Bank_logo.svg.png" alt="PNB" class="bank-logo">
                    <span class="bank-name">Punjab National Bank</span>
                  </div>
                  <div class="bank-item" data-bank="BOB" data-logo="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Bank_of_Baroda_Logo.svg/2232px-Bank_of_Baroda_Logo.svg.png" data-bank-type="retail">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Bank_of_Baroda_Logo.svg/2232px-Bank_of_Baroda_Logo.svg.png" alt="BOB" class="bank-logo">
                    <span class="bank-name">Bank of Baroda</span>
                  </div>
                </div>

                <!-- Netbanking Login Form (initially hidden) -->
                <div class="netbanking-login" id="netbanking-login-form">
                  <div class="netbanking-header">
                    <img id="selected-bank-logo" src="" alt="Bank Logo" class="selected-bank-logo">
                    <span id="selected-bank-name" class="selected-bank-name"></span>
                  </div>
                  
                  <form id="bank-login-form">
                    <!-- Dynamic fields based on bank type -->
                    <div id="bank-fields-container">
                      <!-- Default fields (will be replaced by JS) -->
                      <div class="form-group mb-3">
                        <label for="bank-username" class="form-label">Username/Customer ID</label>
                        <input type="text" class="form-control" id="bank-username" placeholder="Enter username" required>
                      </div>

                      <div class="form-group mb-3">
                        <label for="bank-password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="bank-password" placeholder="Enter password" required>
                      </div>
                    </div>

                    <button type="submit" class="payment-btn">LOGIN & PAY</button>
                  </form>
                </div>

                <button id="bank-pay-btn" class="payment-btn">PROCEED TO PAY</button>
              </div>

              <!-- UPI Tab -->
              <div class="tab-pane fade" id="upi-content" role="tabpanel" aria-labelledby="upi-tab">
                <div class="upi-logos">
                  <div class="upi-logo">
                    <img src="https://cdn-icons-png.flaticon.com/512/825/825464.png" alt="Google Pay">
                  </div>
                  <div class="upi-logo">
                    <img src="https://cdn-icons-png.flaticon.com/512/6124/6124998.png" alt="PhonePe">
                  </div>
                  <div class="upi-logo">
                    <img src="https://cdn-icons-png.flaticon.com/512/6124/6124995.png" alt="Paytm">
                  </div>
                  <div class="upi-logo">
                    <img src="https://cdn-icons-png.flaticon.com/512/10879/10879964.png" alt="BHIM">
                  </div>
                </div>

                <form id="upi-form">
                  <div class="form-group mb-3">
                    <label for="upi-id" class="form-label">UPI ID</label>
                    <input type="text" class="form-control" id="upi-id" placeholder="yourname@upi" required>
                    <div class="form-text text-muted">Enter your UPI ID (e.g. name@okbank)</div>
                  </div>

                  <button type="submit" class="payment-btn">PAY NOW</button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Order Summary Card - Placed on the right side now -->
      <div class="col-lg-4 order-column">
        <div class="card order-summary-card">
          <div class="card-header">
            <i class="bi bi-receipt me-2"></i> Order Summary
          </div>
          <div class="card-body">
            <div id="plan-details">
              <!-- Plan details will be inserted here by JavaScript -->
              <div class="summary-item">
                <span class="summary-item-title">Plan Name</span>
                <span id="plan-name">Loading...</span>
              </div>
              <div class="summary-item">
                <span class="summary-item-title">Validity</span>
                <span id="plan-validity">Loading...</span>
              </div>
              <div class="summary-item">
                <span class="summary-item-title">Data</span>
                <span id="plan-data">Loading...</span>
              </div>
              <div class="summary-item">
                <span class="summary-item-title">Calls</span>
                <span id="plan-calls">Loading...</span>
              </div>
              <div class="summary-item">
                <span class="summary-item-title">SMS</span>
                <span id="plan-sms">Loading...</span>
              </div>
            </div>

            <div class="summary-item summary-total">
              <span>Total Amount</span>
              <span id="plan-price">Loading...</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Initial Verification Modal -->
  <div class="modal fade verification-modal" id="verificationModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Verify Contact Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="verification-header">
            <h4 class="verification-title">Complete Contact Verification</h4>
            <p>Please provide your contact details to proceed with payment</p>
          </div>
          <form id="verification-form">
            <!-- <div class="form-group mb-3">
              <label for="mobile-number" class="form-label">Mobile Number</label>
              <input type="tel" class="form-control" id="mobile-number" placeholder="Enter 10-digit mobile number" pattern="[0-9]{10}" required>
            </div> -->
            <div class="form-group mb-3">
              <label for="email" class="form-label">Email Address</label>
              <input type="email" class="form-control" id="email" placeholder="Enter email address" required>
            </div>
            <button type="submit" class="payment-btn">VERIFY</button>
          </form>
          
          <!-- OTP Verification (initially hidden) -->
          <div id="otp-verification" style="display: none;">
            <div class="my-4 text-center">
              <p>Enter the 4-digit code sent to your mobile and email</p>
              <div class="otp-container">
                <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
              </div>
              <p class="mt-2 mb-0"><small>Didn't receive the code? <a href="#" id="resend-otp">Resend</a></small></p>
            </div>
            <button id="verify-otp-btn" class="payment-btn">SUBMIT</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Payment Processing Modal -->
  <div class="modal fade" id="processingModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-body payment-processing">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <h4 class="mt-3 mb-2">Processing Payment</h4>
          <p id="processing-message">Please wait while we process your payment...</p>
          
          <div class="progress">
            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
          </div>
          
          <div id="processing-steps" class="text-start mt-3">
            <p class="mb-1"><small id="step1"><i class="bi bi-hourglass"></i> Initiating payment request...</small></p>
            <p class="mb-1"><small id="step2"><i class="bi bi-hourglass"></i> Verifying details...</small></p>
            <p class="mb-1"><small id="step3"><i class="bi bi-hourglass"></i> Confirming with bank...</small></p>
            <p class="mb-1"><small id="step4"><i class="bi bi-hourglass"></i> Finalizing transaction...</small></p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Success Modal -->
  <div class="modal fade success-modal" id="successModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="success-icon">
            <i class="bi bi-check-circle<i class="bi bi-check-circle-fill"></i>
          </div>
          <p class="success-message">Payment Successful!</p>
          <p class="success-details">Your transaction has been completed successfully. An email with the receipt has been sent to your registered email address.</p>
          <div class="mt-3">
            <p><strong>Transaction ID:</strong> <span id="transaction-id">MOBIPAY123456789</span></p>
            <p><strong>Amount Paid:</strong> <span id="amount-paid">₹599</span></p>
            <p><strong>Payment Date:</strong> <span id="payment-date">March 3, 2025</span></p>
          </div>
          <button type="button" class="success-btn" data-bs-dismiss="modal">CONTINUE</button>
        </div>
      </div>
    </div>
  </div>

  <!-- OTP Verification Modal for Card Payments -->
  <div class="modal fade verification-modal" id="cardOtpModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Card Verification</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="verification-header">
            <h4 class="verification-title">3D Secure Authentication</h4>
            <p>For your security, we require additional verification</p>
          </div>
          
          <div id="card-otp-verification">
            <div class="my-4 text-center">
              <p>Enter the OTP sent to your registered mobile number</p>
              <div class="otp-container">
                <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
              </div>
              <p class="mt-2 mb-0"><small>Didn't receive the OTP? <a href="#" id="resend-card-otp">Resend</a></small></p>
            </div>
            <button id="verify-card-otp-btn" class="payment-btn">VERIFY & PAY</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <script>
    
    // Fetch plan data from URL parameters
function getPlanDataFromURL() {
  const urlParams = new URLSearchParams(window.location.search);
  return {
    name: urlParams.get('name') || "Plan",
    validity: urlParams.get('validity') || "N/A",
    data: urlParams.get('data') || "N/A",
    calls: urlParams.get('calls') || "N/A",
    sms: urlParams.get('sms') || "N/A",
    price: urlParams.get('price') || "₹0"
  };
}

// Display plan details in the order summary
document.addEventListener('DOMContentLoaded', function() {
  // Get plan data from URL
  const planData = getPlanDataFromURL();
  
  // Show the payment container
  document.getElementById('payment-main-container').style.display = 'block';
  
  // Set plan details
  document.getElementById('plan-name').textContent = planData.name;
  document.getElementById('plan-validity').textContent = planData.validity;
  document.getElementById('plan-data').textContent = planData.data;
  document.getElementById('plan-calls').textContent = planData.calls;
  document.getElementById('plan-sms').textContent = planData.sms;
  document.getElementById('plan-price').textContent = planData.price;
  
  // Show verification modal
  const verificationModal = new bootstrap.Modal(document.getElementById('verificationModal'));
  verificationModal.show();
});

// Credit Card Format
document.getElementById('card-number').addEventListener('input', function(e) {
  let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
  let formattedValue = '';
  
  for (let i = 0; i < value.length; i++) {
    if (i > 0 && i % 4 === 0) {
      formattedValue += ' ';
    }
    formattedValue += value[i];
  }
  
  e.target.value = formattedValue;
});

// Expiry Date Format
document.getElementById('card-expiry').addEventListener('input', function(e) {
  let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
  
  if (value.length > 2) {
    e.target.value = value.substring(0, 2) + '/' + value.substring(2, 4);
  } else {
    e.target.value = value;
  }
});

// Verification Form Submission
document.getElementById('verification-form').addEventListener('submit', function(e) {
  e.preventDefault();
  // Hide the form and show OTP verification
  this.style.display = 'none';
  document.getElementById('otp-verification').style.display = 'block';
});

// OTP Input Handling
const otpInputs = document.querySelectorAll('.otp-input');
otpInputs.forEach((input, index) => {
  input.addEventListener('input', function() {
    if (this.value.length === 1) {
      if (index < otpInputs.length - 1) {
        otpInputs[index + 1].focus();
      }
    }
  });
  
  input.addEventListener('keydown', function(e) {
    if (e.key === 'Backspace' && !this.value && index > 0) {
      otpInputs[index - 1].focus();
    }
  });
});

// OTP Verification Button
document.getElementById('verify-otp-btn').addEventListener('click', function() {
  // Close verification modal and continue to payment
  bootstrap.Modal.getInstance(document.getElementById('verificationModal')).hide();
});

// Resend OTP Link
document.getElementById('resend-otp').addEventListener('click', function(e) {
  e.preventDefault();
  alert('A new OTP has been sent to your mobile and email.');
});

// Bank Selection
const bankItems = document.querySelectorAll('.bank-item');
bankItems.forEach(item => {
  item.addEventListener('click', function() {
    // Remove selected class from all banks
    bankItems.forEach(bank => bank.classList.remove('selected'));
    
    // Add selected class to clicked bank
    this.classList.add('selected');
    
    // Show netbanking login form
    const loginForm = document.getElementById('netbanking-login-form');
    loginForm.style.display = 'block';
    
    // Set selected bank details
    const bankName = this.getAttribute('data-bank');
    const bankLogo = this.getAttribute('data-logo');
    const bankType = this.getAttribute('data-bank-type');
    
    document.getElementById('selected-bank-name').textContent = this.querySelector('.bank-name').textContent;
    document.getElementById('selected-bank-logo').src = bankLogo;
    
    // Hide proceed button once a bank is selected
    document.getElementById('bank-pay-btn').style.display = 'none';
  });
});

// Proceed to Pay Button (Netbanking)
document.getElementById('bank-pay-btn').addEventListener('click', function() {
  alert('Please select a bank to proceed with payment.');
});

// Card Payment Form Submission
document.getElementById('card-form').addEventListener('submit', function(e) {
  e.preventDefault();
  // Show card OTP modal
  const cardOtpModal = new bootstrap.Modal(document.getElementById('cardOtpModal'));
  cardOtpModal.show();
});

// Card OTP Verification Button
document.getElementById('verify-card-otp-btn').addEventListener('click', function() {
  // Close card OTP modal
  bootstrap.Modal.getInstance(document.getElementById('cardOtpModal')).hide();
  
  // Show processing modal
  const processingModal = new bootstrap.Modal(document.getElementById('processingModal'));
  processingModal.show();
  
  // Animate processing steps
  simulatePaymentProcessing();
});

// Netbanking Form Submission
document.getElementById('bank-login-form').addEventListener('submit', function(e) {
  e.preventDefault();
  
  // Show processing modal
  const processingModal = new bootstrap.Modal(document.getElementById('processingModal'));
  processingModal.show();
  
  // Animate processing steps
  simulatePaymentProcessing();
});

// UPI Form Submission
document.getElementById('upi-form').addEventListener('submit', function(e) {
  e.preventDefault();
  
  // Show processing modal
  const processingModal = new bootstrap.Modal(document.getElementById('processingModal'));
  processingModal.show();
  
  // Animate processing steps
  simulatePaymentProcessing();
});

// Function to simulate payment processing
function simulatePaymentProcessing() {
  const progressBar = document.querySelector('.progress-bar');
  const step1 = document.getElementById('step1');
  const step2 = document.getElementById('step2');
  const step3 = document.getElementById('step3');
  const step4 = document.getElementById('step4');
  
  // Get plan data for the success modal
  const planData = getPlanDataFromURL();
  
  // Step 1
  progressBar.style.width = '25%';
  step1.innerHTML = '<i class="bi bi-check-circle-fill text-success"></i> Initiating payment request...';
  
  // Step 2
  setTimeout(() => {
    progressBar.style.width = '50%';
    step2.innerHTML = '<i class="bi bi-check-circle-fill text-success"></i> Verifying details...';
  }, 1500);
  
  // Step 3
  setTimeout(() => {
    progressBar.style.width = '75%';
    step3.innerHTML = '<i class="bi bi-check-circle-fill text-success"></i> Confirming with bank...';
  }, 3000);
  
  // Step 4
  setTimeout(() => {
    progressBar.style.width = '100%';
    step4.innerHTML = '<i class="bi bi-check-circle-fill text-success"></i> Finalizing transaction...';
  }, 4500);
  
  // Show success modal
  setTimeout(() => {
    bootstrap.Modal.getInstance(document.getElementById('processingModal')).hide();
    const successModal = new bootstrap.Modal(document.getElementById('successModal'));
    successModal.show();
    
    // Set current date in success modal
    const today = new Date();
    document.getElementById('payment-date').textContent = today.toLocaleDateString('en-US', { 
      year: 'numeric', 
      month: 'long', 
      day: 'numeric' 
    });
    
    // Set amount paid
    document.getElementById('amount-paid').textContent = planData.price;
    
    // Generate random transaction ID
    const transactionId = 'MOBIPAY' + Math.floor(Math.random() * 1000000000);
    document.getElementById('transaction-id').textContent = transactionId;
  }, 6000);
}
  </script>
</body>
</html>